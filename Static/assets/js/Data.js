const EstateData = {
    'Cite Universitaire': {
        id: 'CU',
        name: 'Cite Universitaire',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price: '30,000FCFA-double rooms and 60,000FCFA single rooms',
        Free_Rooms: '//',
        Distance:'Near',
        Space: 'Medium',
        description: 'A good estate for disciplined students',
        WIFI: 'NO',
        Restaurant:'NO',
        Generator: 'YES',
        TV_Fridge:'NO',
        Security:'YES',
        image: 'Static/assets/img/Estate Images/DJI_0076.jpg',
        category: ['Security', 'Generator','Budget_Friendly','Distance'],
        images: [
            'Static/assets/img/Estate Images/DJI_0076.jpg',
            'Static/assets/img/Estate Images/DJI_0075.jpg'
        ],
    },
    'RPN': {
        id: 'RPN',
        name: 'RPN',
        rating: 4.0,
        location: 'It is located near the school university',
        Capacity: '//To modify',
        Price: '60,000FCFA single rooms, 120,000FCFA caution,50,000FCFA wifi',
        Free_Rooms: '// To modify',
       Distance:'Near',
        Space: 'Medium',
        description: 'A good estate for disciplined students',
        WIFI: 'YES',
        Restaurant:'NO',
        Generator: 'YES',
        TV_Fridge:'NO',
        Security:'YES',
        image: 'Static/assets/img/DJI_0078.jpg',
        category: ['Security', 'Generator','Budget_Friendly','WIFI','Distance'],
       
        images: [
            'Static/assets/img/DJI_0078.jpg'
        ],
    },
     'Colonel': {
        id: 'Colonel',
        name: 'Colonel/Bao',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price: '60,000FCFA single rooms',
        Free_Rooms: '//',
        Distance:'Near',
        Space: 'Large',
        description: 'A good estate for disciplined students',
        WIFI: 'YES',
        Restaurant:'NO',
        Generator: 'YES',
        TV_Fridge:'NO',
        Security:'NO',
        image: 'Static/assets/img/Estate Images/DJI_0081.jpg',
        category: ['Distance', 'Generator','Budget_Friendly','WIFI'],
        images: [
            'Static/assets/img/Estate Images/DJI_0081.jpg'
        ],
    },
     'Bevina': {
        id: 'Bevina',
        name: 'Bevina City',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price: ' 50,000FCFA single rooms',
        Free_Rooms: '//',
        Distance:'Near',
        Space: 'Medium',
        description: 'A good estate for disciplined students',
        WIFI: 'NO',
        Restaurant:'NO',
        Generator: 'YES',
        TV_Fridge:'NO',
        Security:'NO',
        image: 'Static/assets/img/Estate Images/DJI_0084.jpg',
        category: ['Distance', 'Generator','Budget_Friendly'],
        images: [
            'Static/assets/img/Estate Images/DJI_0084.jpg'
        
        ],
    },
     'Verte': {
        id: 'Verte',
        name: 'Mini Cite la Grace',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price: '60,000FCFA single rooms',
        Free_Rooms: '//',
        Distance:'Near',
        Space: 'Large',
        description: 'A good estate for disciplined students',
        WIFI: 'YES',
        Restaurant:'NO',
        Generator: 'YES',
        TV_Fridge:'NO',
        Security:'NO',
        image: 'Static/assets/img/Estate Images/DJI_0064.jpg',
        category: ['Distance', 'Generator','Budget_Friendly','WIFI'],
        images: [
            'Static/assets/img/Estate Images/DJI_0065.jpg'
        ],
    },
     'Peace': {
        id: 'Peace',
        name: 'City Of Peace',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price: '50,000FCFA single rooms',
        Free_Rooms: '//',
        Distance:'Near',
        Space: 'Small',
        description: 'A good estate for disciplined students',
        WIFI: 'NO',
        Restaurant:'NO',
        Generator: 'NO',
        TV_Fridge:'NO',
        Security:'NO',
        image: 'Static/assets/img/Estate Images/DJI_0071.jpg',
        category: [ 'Budget_Friendly'],
        images: [
            'Static/assets/img/Estate Images/DJI_0071.jpg'
        ],
    },
     'Divine': {
        id: 'Divine',
        name: 'Grace Divine',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price: '50,000FCFA single rooms',
        Free_Rooms: '//',
        Distance:'Near',
        Space: 'Small',
        description: 'A good estate for disciplined students',
        WIFI: 'NO',
        Restaurant:'NO',
        Generator: 'YES',
        TV_Fridge:'NO',
        Security:'NO',
        image: 'Static/assets/img/Estate Images/DJI_0071.jpg',
        category: [ 'Generator','Budget_Friendly'],
        images: [
            'Static/assets/img/Estate Images/DJI_0071.jpg'
        ],
    },
     'Providence': {
        id: 'Providence',
        name: 'Providence ',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price:'00',
        Free_Rooms: '//',
        Distance:'Far',
        Space: 'Large',
        description: 'A good estate for disciplined students',
        WIFI: 'YES',
        Restaurant:'NO',
        Generator: 'YES',
        TV_Fridge:'NO',
        Security:'YES',
        image: 'Static/assets/img/Estate Images/DJI_0071.jpg',
        category: ['Security', 'Generator','Budget_Friendly','WIFI'],
        images: [
            'Static/assets/img/Estate Images/DJI_0071.jpg'
            
        ],
    },
     'Toundalia': {
        id: 'Toundalia',
        name: 'Toundalia City',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price: '60,000FCFA single rooms',
        Free_Rooms: '//',
        Distance:'Far',
        Space: 'Medium',
        description: 'A good estate for disciplined students',
        WIFI: 'YES',
        Restaurant:'NO',
        Generator: 'YES',
        TV_Fridge:'NO',
        Security:'YES',
        image: 'Static/assets/img/Estate Images/DJI_0068.jpg',
        category: ['Security', 'Generator','Budget_Friendly','WIFI'],
        deliveryAvailable: true,
        features: ['Monopoly of Beignet Haricot', 'Quick Service', 'Budget Friendly', 'Available everyday'],
        images: [
            'Static/assets/img/Estate Images/DJI_0068.jpg',
            'Static/assets/img/Estate Images/DJI_0067.jpg'
        ],
    },
     'TBC': {
        id: 'TBC',
        name: 'TBC',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price: '60,000FCFA single rooms',
        Free_Rooms: '//',
        Distance:'Near',
        Space: 'Small',
        description: 'A good estate for disciplined students',
        WIFI: 'YES',
        Restaurant:'YES',
        Generator: 'YES',
        TV_Fridge:'NO',
        Security:'YES',
        image: 'Static/assets/img/Estate Images/photo_2024-11-26_08-36-31.jpg',
        category: ['Security', 'Generator','Budget_Friendly','Restaurant','WIFI'],
        images: [
            'Static/assets/img/Estate Images/photo_2024-11-26_08-36-29.jpg',
            'Static/assets/img/Estate Images/photo_2024-11-26_08-36-26.jpg'
        ],
    },
     'Digital': {
        id: 'Digital',
        name: 'Digital CIty',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price: ' 70,000FCFA single rooms',
        Free_Rooms: '//',
        Distance:'Near',
        Space: 'Small',
        description: 'A good estate for disciplined students',
        WIFI: 'YES',
        Restaurant:'YES',
        Generator: 'YES',
        TV_Fridge:'YES',
        Security:'YES',
        image: 'Static/assets/img/Estate Images/photo_2024-11-26_08-36-26.jpg',
        category: ['Security', 'Generator','Restaurant','TV_Fridge','WIFI'],
        images: [
            'Static/assets/img/Estate Images/photo_2024-11-26_08-36-26.jpg'
           
        ],
    },
     'Shekina': {
        id: 'Shekina',
        name: 'Shekina',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price: '80,000FCFA single rooms',
        Free_Rooms: '//',
        Distance:'Near',
        Space: 'Medium',
        description: 'A good estate for disciplined students',
        WIFI: 'YES',
        Restaurant:'YES',
        Generator: 'YES',
        TV_Fridge:'YES',
        Security:'YES',
        image: 'Static/assets/img/Estate Images/photo_2024-11-26_08-36-15.jpg',
        category: ['Security', 'Generator','Restaurant','TV_Fridge','WIFI'],
        images: [
            'Static/assets/img/Estate Images/photo_2024-11-26_08-36-09.jpg'

        ],
    },
     'Jumeirah': {
        id: 'Jumeirah',
        name: 'Jumeirah',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price: ' 60,000FCFA single rooms',
        Free_Rooms: '//',
        Distance:'Near',
        Space: 'Medium',
        description: 'A good estate for disciplined students',
        WIFI: 'NO',
        Restaurant:'NO',
        Generator: 'YES',
        TV_Fridge:'NO',
        Security:'NO',
        image: 'Static/assets/img/Estate Images/photo_2024-11-26_08-36-09.jpg',
        category: ['Distance', 'Generator','Budget_Friendly'],
        images: [
            'Static/assets/img/Estate Images/photo_2024-11-26_08-36-09.jpg'
        ],
    },
     'Heaven': {
        id: 'Heaven',
        name: 'Heaven City',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price: '55,000FCFA single rooms',
        Free_Rooms: '//',
        Distance:'Far',
        Space: 'Medium',
        description: 'A good estate for disciplined students',
        WIFI: 'YES',
        Restaurant:'NO',
        Generator: 'YES',
        TV_Fridge:'NO',
        Security:'YES',
        image: 'Static/assets/img/Estate Images/photo_2024-11-26_08-36-09.jpg',
        category: ['Security','WIFI', 'Generator','Budget_Friendly'],
        images: [
            'Static/assets/img/Estate Images/photo_2024-11-26_08-36-09.jpg'
            
        ],
    },
     'Germain': {
        id: 'Germain',
        name: 'Cite Saint Germain',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price: '50,000FCFA single rooms',
        Free_Rooms: '//',
        Distance:'Far',
        Space: 'Large',
        description: 'A good estate for disciplined students',
        WIFI: 'NO',
        Restaurant:'NO',
        Generator: 'NO',
        TV_Fridge:'NO',
        Security:'NO',
        image: 'Static/assets/img/Estate Images/photo_2024-11-26_08-36-09.jpg',
        category: ['Large_Space', 'Budget_Friendly'],
       
        images: [
            'Static/assets/img/Estate Images/photo_2024-11-26_08-36-09.jpg'
           
        ],
    },
     'Joseph': {
        id: 'Joseph',
        name: 'Cite Saint Joseph',
        rating: 3.0,
        location: 'It is located near the school campus',
        Capacity: '// to modify',
        Price: '80,000FCFA single rooms',
        Free_Rooms: '//',
        Distance:'Far',
        Space: 'Large',
        description: 'A good estate for disciplined students',
        WIFI: 'YES',
        Restaurant:'NO',
        Generator: 'YES',
        TV_Fridge:'NO',
        Security:'YES',
        image: 'Static/assets/img/Estate Images/DJI_0076.jpg',
        category: ['Security', 'Generator','Large_Space'],
        images: [
            'Static/assets/img/Estate Images/DJI_0076.jpg'
       
        ],
    }
};
const userData = {
    students: [],
    owners: []
};
const ordersData = [];
const appState = {
    currentUser: null,
    userRole: null,
    selectedEstate: null,
    currentView: 'main',
    searchResults: [],
    filteredEstates: Object.values(EstateData)
};
const dataManager = {
    // Estate operations
    getEstate: (id) => EstateData[id],
    
    getAllEstates: () => Object.values(EstateData),
    
    getEstatesByCategory: (category) => {
        return Object.values(EstateData).filter(Estate => 
            Estate.category.includes(category)
        );
    },
    
    searchEstates: (query) => {
        const lowercaseQuery = query.toLowerCase();
        return Object.values(EstateData).filter(Estate => 
            Estate.name.toLowerCase().includes(lowercaseQuery) 
        );
    },
    
    // User operations
    createUser: (userData, role) => {
        const user = {
            id: Date.now().toString(),
            ...userData,
            createdAt: new Date().toISOString(),
            role: role
        };
        
        if (role === 'student') {
            dataManager.userData.students.push(user);
        } else if (role === 'owner') {
            dataManager.userData.owners.push(user);
            // If owner, also create Estate entry
            if (userData.EstateName) {
                dataManager.createEstate(user.id, userData);
            }
        }
        
        return user;
    },
    
    findUser: (email, role) => {
        const users = role === 'student' ? dataManager.userData.students : dataManager.userData.owners;
        return users.find(user => user.email === email);
    },
    
    // Estate operations for owners
  
    
    updateEstate: (EstateId, updates) => {
        if (EstateData[EstateId]) {
            EstateData[EstateId] = { ...EstateData[EstateId], ...updates };
            return EstateData[EstateId];
        }
        return null;
    },
    // Order operations
    createOrder: (orderData) => {
        const order = {
            id: `order-${Date.now()}`,
            ...orderData,
            status: 'pending',
            createdAt: new Date().toISOString(),
            updatedAt: new Date().toISOString()
        };
        ordersData.push(order);
        return order;
    },
    
    updateOrderStatus: (orderId, status) => {
        const order = ordersData.find(o => o.id === orderId);
        if (order) {
            order.status = status;
            order.updatedAt = new Date().toISOString();
            return order;
        }
        return null;
    },
    
    getOrdersByUser: (userId) => {
        return ordersData.filter(order => order.customerId === userId);
    },
    
    getOrdersByEstate: (EstateId) => {
        return ordersData.filter(order => order.EstateId === EstateId);
    },
    // Review operations
    createReview: (reviewData) => {
        const review = {
            id: `review-${Date.now()}`,
            ...reviewData,
            createdAt: new Date().toISOString()
        };
        reviewsData.push(review);
        
       
        if (EstateData[reviewData.EstateId]) {
            EstateData[reviewData.EstateId].reviews.push(review);
            // Update Estate rating
            dataManager.updateEstateRating(reviewData.EstateId);
        }
        
        return review;
    },
    
    getReviewsByEstate: (EstateId) => {
        return reviewsData.filter(review => review.EstateId === EstateId);
    },
    
    updateEstateRating: (EstateId) => {
        if (EstateData[EstateId]) {
            const reviews = EstateData[EstateId].reviews;
            if (reviews.length > 0) {
                const averageRating = reviews.reduce((sum, review) => sum + review.rating, 0) / reviews.length;
                restaurantData[restaurantId].rating = Math.round(averageRating * 10) / 10;
            }
        }
    },
    
    // Statistics
  
    // Local storage operations
    saveToLocalStorage: () => {
        try {
            localStorage.setItem('EyangEstate_Estates', JSON.stringify(EstateData));
            localStorage.setItem('EyangEstate_users', JSON.stringify(userData));
            localStorage.setItem('EyangEstate_orders', JSON.stringify(ordersData));
            localStorage.setItem('EyangEstate_reviews', JSON.stringify(reviewsData));
        } catch (error) {
            console.error('Error saving to localStorage:', error);
        }
    },
    
    loadFromLocalStorage: () => {
        try {
            const Estates = localStorage.getItem('EyangEstate_restaurants');
            const users = localStorage.getItem('EyangEstate_users');
            const orders = localStorage.getItem('EyangEstate_orders');
            const reviews = localStorage.getItem('EyangEstate_reviews');
            
            if (Estates) {
                Object.assign(EstateData, JSON.parse(Estates));
            }
            if (users) {
                Object.assign(userData, JSON.parse(users));
            }
            if (orders) {
                ordersData.splice(0, ordersData.length, ...JSON.parse(orders));
            }
            if (reviews) {
                reviewsData.splice(0, reviewsData.length, ...JSON.parse(reviews));
            }
        } catch (error) {
            console.error('Error loading from localStorage:', error);
        }
    },   
    // Export data property for external access
    userData
};
